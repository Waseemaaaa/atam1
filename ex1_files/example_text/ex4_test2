# -------------------------------------------------
# TEST 2: Illegal Pawn move
# -------------------------------------------------
# Black pawn at (6,0) -> (5,1)
# play = [1, 6, 0]
# valid - expected result = 0
# -------------------------------------------------

.section .data

# --- Before move ---
board_1:
    .byte 'r','n','b','q','k','b','n','r'     # row 0
    .byte 'p','p','p','p','p','p','p','p'     # row 1
    .byte 0,0,0,0,0,0,0,0                     # row 2
    .byte 0,0,0,0,0,0,0,0                     # row 3
    .byte 0,0,0,0,0,0,0,0                     # row 4
    .byte 0,0,0,0,0,0,0,0                     # row 5
    .byte 'P','P','P','P','P','P','P','P'     # row 6 <-- pawn at (6,0)
    .byte 'R','N','B','Q','K','B','N','R'     # row 7

# --- After move ---
board_2:
    .byte 'r','n','b','q','k','b','n','r'     # row 0
    .byte 'p','p','p','p','p','p','p','p'     # row 1
    .byte 0,0,0,0,0,0,0,0                     # row 2
    .byte 0,0,0,0,0,0,0,0                     # row 3
    .byte 0,0,0,0,0,0,0,0                     # row 4
    .byte 0,'P',0,0,0,0,0,0                   # row 5 <-- pawn moved diagonally without capturing
    .byte 0,'P','P','P','P','P','P','P'       # row 6
    .byte 'R','N','B','Q','K','B','N','R'     # row 7

play:
    .int 1, 6, 0         # 1 = black, row=6, col=0

valid:
    .byte 7

.section .text

    # After ex4 returns, check if valid = 0 
    movzbl valid(%rip), %eax  
    cmp $0, %al                
    je success                 

error:
    mov $60, %rax              # sys_exit
    mov $1, %rdi               # exit code 1 (error)
    syscall

success:
    mov $60, %rax              # sys_exit
    xor %rdi, %rdi             # exit code 0 (success)
    syscall


